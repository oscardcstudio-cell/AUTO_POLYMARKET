"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1235],{11235:(e,t,a)=>{a.d(t,{R:()=>g});var r=a(95155),s=a(88661),n=a.n(s),l=a(12115),o=a(56154),i=a(85921),c=a(1524),d=a(65506),x=a(8803),m=a(12108),f=a(24033),b=a(65015),u=a(91444),h=a(53356),p=a(77699);function g(e){var t;let{onStartTour:a,showPlayButton:s=!1,isCollapsed:g,onToggleCollapse:j,onMarketSelect:v,markets:w}=e,k="breaking-markets-cache:".concat("6h",":v2"),N="neh-status",[y,_]=(0,l.useState)(!1),[S,E]=(0,l.useState)(!1),C=void 0!==g?g:y,M=()=>{if(j)j();else{let e=!y;_(e);try{window.localStorage.setItem("breaking-ticker-collapsed",String(e))}catch(e){}}};(0,l.useEffect)(()=>{if(E(!0),void 0===g)try{let e=window.localStorage.getItem("breaking-ticker-collapsed");"true"===e&&_(!0)}catch(e){}},[g]);let[A,P]=(0,l.useState)([]),[H,I]=(0,l.useState)(!0),F=void 0!==w,z=F?w:A,L=!F&&H,[R,B]=(0,l.useState)(!1),W=(0,u.n3)(),D=(0,h.B)(void 0,{disabled:!!W}),{index:O,loading:T,error:U,connectionStatus:q}=null!=W?W:D;(0,l.useEffect)(()=>{F||e();async function e(){try{let e=1/0;try{let t=localStorage.getItem(k);if(t){let{timestamp:a,data:r}=JSON.parse(t);Array.isArray(r)&&r.length>0&&(P(r),I(!1)),"number"==typeof a&&Number.isFinite(a)&&(e=Date.now()-a)}}catch(e){}if(e<18e4)return void I(!1);let t=await fetch("/api/markets/breaking?window=".concat("6h","&final_limit=").concat(20,"&format=ticker"));if(!t.ok)throw Error("Failed to fetch");let a=(await t.json()).markets||[];a.length>0?(P(a),localStorage.setItem(k,JSON.stringify({data:a,timestamp:Date.now()})),I(!1)):0===A.length&&I(!1)}catch(e){console.error("Failed to load breaking markets ticker:",e),I(!1)}}},[k,18e4,"6h",F,A.length]);let J=z.slice(0,20),Q=U?"Status: NEH index offline":T?"Status: loading NEH index…":"Status: ".concat(null!=(t=null==O?void 0:O.label)?t:"Nothing Ever Happens"),G=(0,l.useMemo)(()=>{var e;return{id:N,market_id:N,title:Q,slug:"nothingeverhappens",price_movement:0,latest_price:Math.max(0,Math.min(1,(null!=(e=null==O?void 0:O.value)?e:0)/100)),start_price_24h:void 0,image:void 0}},[N,null==O?void 0:O.value,Q]),K=(0,l.useMemo)(()=>[...J,G],[J,G]),V=(0,l.useRef)(null),X=(0,l.useRef)(null),Y=(0,l.useMemo)(()=>[...K,...K],[K]),Z=Math.max(12*K.length,40)+"s",$=(0,l.useCallback)(()=>{let e=V.current;if(!e)return;let t=e.scrollWidth/2;e.scrollLeft>=t&&(e.scrollLeft=e.scrollLeft-t)},[]);return S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1),className:"jsx-eebb6ff5d71da5ca "+"w-full transition-all duration-300 ease-in-out ".concat(C?"h-0 opacity-0 pointer-events-none":"h-[40px] opacity-100"," bg-gray-900 border-b border-gray-700 overflow-hidden flex items-center relative group"),children:[(0,r.jsxs)("div",{className:"jsx-eebb6ff5d71da5ca absolute left-0 top-0 bottom-0 z-20 flex items-center bg-gray-900 pl-2.5 pr-3.5 shadow-[10px_0_20px_rgb(17,24,39)]",children:[(0,r.jsxs)("div",{className:"jsx-eebb6ff5d71da5ca flex items-center gap-1.5 bg-red-900/30 border border-red-500/30 px-2 py-0.5 rounded",children:[(0,r.jsx)(o.A,{className:"w-3 h-3 text-red-400 fill-red-400 animate-pulse"}),(0,r.jsx)("span",{className:"jsx-eebb6ff5d71da5ca hidden sm:inline text-xs font-bold font-mono text-red-100 tracking-wider",children:"BREAKING"})]}),s&&a&&(0,r.jsx)("button",{onClick:a,"aria-label":"Start breaking news tour",title:"Start breaking news tour",className:"jsx-eebb6ff5d71da5ca ml-2 p-1 rounded bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 hover:border-red-500/50 transition-all group/play",children:(0,r.jsx)(i.A,{className:"w-3 h-3 text-red-400 fill-red-400 group-hover/play:scale-110 transition-transform"})}),(0,r.jsx)("div",{className:"jsx-eebb6ff5d71da5ca w-[1px] h-5 bg-gray-800 mx-2.5 hidden"})]}),(0,r.jsx)("div",{ref:V,onScroll:$,onWheel:()=>B(!0),onTouchStart:()=>B(!0),onTouchEnd:()=>B(!1),className:"jsx-eebb6ff5d71da5ca flex items-center overflow-x-auto scrollbar-hide h-full w-full pl-28 relative",children:(0,r.jsx)("div",{ref:X,style:{animationPlayState:R?"paused":"running",width:"max-content",animationDuration:Z,willChange:"transform"},className:"jsx-eebb6ff5d71da5ca "+"flex items-center gap-8 whitespace-nowrap ".concat(L||0===K.length?"":"animate-ticker"),children:L||0===K.length?(0,r.jsxs)("div",{className:"jsx-eebb6ff5d71da5ca flex items-center space-x-2 text-gray-500 pl-4",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 animate-pulse"}),(0,r.jsx)("span",{className:"jsx-eebb6ff5d71da5ca text-xs font-mono uppercase tracking-wider",children:"Loading…"})]}):Y.map((e,t)=>{var a,s,n,l;let o=e.id===N,i=(e.latest_price||0)-(e.start_price_24h||0),m=i>=0,f=100*Math.abs(i),u=o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"jsx-eebb6ff5d71da5ca flex items-center gap-2 min-w-0",children:[(0,r.jsx)("div",{className:"jsx-eebb6ff5d71da5ca w-5 h-5 rounded-full bg-slate-900 border border-slate-700 flex items-center justify-center",children:(0,r.jsx)(d.A,{className:"w-3 h-3 ".concat("connected"===q?"text-emerald-400 animate-pulse":"text-slate-400")})}),(0,r.jsx)("span",{className:"jsx-eebb6ff5d71da5ca text-[13px] font-medium text-gray-200 whitespace-nowrap",children:e.title})]}),(0,r.jsxs)("div",{className:"jsx-eebb6ff5d71da5ca flex items-center gap-3 shrink-0",children:[(0,r.jsx)(p.Q,{value:null!=(a=null==O?void 0:O.value)?a:0,className:"w-12 relative"}),(0,r.jsx)("span",{style:{color:null!=(s=null==O?void 0:O.color)?s:"#94a3b8"},title:T?"NEH Index updating…":"NEH Index: ".concat(null!=(n=null==O?void 0:O.value)?n:0,"/100"),className:"jsx-eebb6ff5d71da5ca text-base font-bold tracking-tight tabular-nums",children:(null!=(l=null==O?void 0:O.value)?l:0).toFixed(0)}),(0,r.jsx)("div",{className:"jsx-eebb6ff5d71da5ca flex items-center px-1 py-0.5 rounded text-[11px] font-bold bg-slate-500/15 text-slate-200",children:(0,r.jsx)("span",{className:"jsx-eebb6ff5d71da5ca font-mono uppercase tracking-wider",children:"NEH"})})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"jsx-eebb6ff5d71da5ca flex items-center gap-2",children:[e.image?(0,r.jsx)("img",{src:e.image,alt:"",onError:e=>{e.target.src="/polymarket-avatar.jpg"},className:"jsx-eebb6ff5d71da5ca w-5 h-5 rounded-full object-cover border border-gray-700"}):(0,r.jsx)("div",{className:"jsx-eebb6ff5d71da5ca w-5 h-5 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center",children:(0,r.jsx)("span",{className:"jsx-eebb6ff5d71da5ca text-[10px] text-gray-500",children:"PM"})}),(0,r.jsx)("span",{className:"jsx-eebb6ff5d71da5ca text-[13px] font-medium text-gray-200 whitespace-nowrap",children:e.title})]}),(0,r.jsxs)("div",{className:"jsx-eebb6ff5d71da5ca flex items-center gap-3 shrink-0",children:[(0,r.jsxs)("span",{className:"jsx-eebb6ff5d71da5ca text-base font-bold text-white tracking-tight",children:[Math.round(100*e.latest_price),"%"]}),(0,r.jsxs)("div",{className:"jsx-eebb6ff5d71da5ca "+"flex items-center px-1 py-0.5 rounded text-[11px] font-bold ".concat(m?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:[m?(0,r.jsx)(c.A,{className:"w-3 h-3 mr-1"}):(0,r.jsx)(x.A,{className:"w-3 h-3 mr-1"}),(0,r.jsxs)("span",{className:"jsx-eebb6ff5d71da5ca",children:[f.toFixed(0),"%"]})]})]})]});return o?(0,r.jsx)("a",{href:"/nothingeverhappens",title:"Open NEH Index",className:"jsx-eebb6ff5d71da5ca flex items-center gap-3 hover:brightness-125 py-1 px-3 rounded transition-all flex-shrink-0",children:u},"".concat(e.id,"-").concat(t)):v?(0,r.jsx)("button",{type:"button",onClick:()=>v(e),title:e.title,className:"jsx-eebb6ff5d71da5ca flex items-center gap-3 hover:bg-white/5 py-0.5 px-2.5 rounded transition-colors flex-shrink-0 text-left",children:u},"".concat(e.id,"-").concat(t)):(0,r.jsx)("a",{href:(0,b.q)("https://polymarket.com/market/".concat(encodeURIComponent(e.slug)),{utm_medium:"breaking-ticker",utm_content:e.slug||e.market_id}),target:"_blank",rel:"noopener noreferrer",className:"jsx-eebb6ff5d71da5ca flex items-center gap-3 hover:bg-white/5 py-0.5 px-2.5 rounded transition-colors flex-shrink-0",children:u},"".concat(e.id,"-").concat(t))})})}),(0,r.jsxs)("div",{className:"jsx-eebb6ff5d71da5ca absolute right-0 top-0 bottom-0 z-20 flex items-center",children:[(0,r.jsx)("div",{className:"jsx-eebb6ff5d71da5ca w-14 bg-gradient-to-l from-gray-900 to-transparent pointer-events-none"}),(0,r.jsx)("button",{onClick:M,"aria-label":C?"Show ticker":"Hide ticker",title:C?"Show ticker":"Hide ticker",className:"jsx-eebb6ff5d71da5ca p-1.5 bg-gray-900 hover:bg-gray-800 border-l border-gray-700 transition-colors",children:(0,r.jsx)(m.A,{className:"w-3.5 h-3.5 text-gray-400 hover:text-gray-200"})})]}),(0,r.jsx)(n(),{id:"eebb6ff5d71da5ca",children:"@keyframes ticker{from{transform:translatex(0)}to{transform:translatex(-50%)}}.animate-ticker.jsx-eebb6ff5d71da5ca{animation-name:ticker;animation-timing-function:linear;animation-iteration-count:infinite}.scrollbar-hide.jsx-eebb6ff5d71da5ca{-ms-overflow-style:none;scrollbar-width:none}.scrollbar-hide.jsx-eebb6ff5d71da5ca::-webkit-scrollbar{display:none}"})]}),C&&(0,r.jsx)("button",{type:"button",onClick:M,className:"fixed top-0 left-1/2 -translate-x-1/2 z-[1401] pointer-events-auto group bg-gray-900/75 hover:bg-gray-900/90 border border-red-500/30 hover:border-red-500/60 border-t-0 shadow-[0_12px_22px_rgba(0,0,0,0.55)] backdrop-blur px-3 py-1.5 rounded-b-xl transition-all","aria-label":"Show breaking markets ticker",title:"Show Breaking Markets",children:(0,r.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(o.A,{className:"w-3.5 h-3.5 text-red-400/80 fill-red-400/80 group-hover:text-red-400 group-hover:fill-red-400 transition-colors"}),(0,r.jsx)(f.A,{className:"w-3.5 h-3.5 text-gray-300/80 group-hover:text-gray-200 transition-colors"})]})})]}):C?null:(0,r.jsx)("div",{className:"h-[40px] w-full bg-gray-900 border-b border-gray-700"})}},65015:(e,t,a)=>{a.d(t,{q:()=>r});function r(e,t){try{let a=new URL(e,window.location.href),r=a.hostname.toLowerCase();return("polymarket.com"===r||r.endsWith(".polymarket.com"))&&"embed.polymarket.com"!==r&&(a.searchParams.has("via")||a.searchParams.set("via","pizzintwatch"),a.searchParams.has("utm_source")||a.searchParams.set("utm_source","pizzint.watch"),(null==t?void 0:t.utm_medium)&&!a.searchParams.has("utm_medium")&&a.searchParams.set("utm_medium",t.utm_medium),(null==t?void 0:t.utm_content)&&!a.searchParams.has("utm_content")&&a.searchParams.set("utm_content",t.utm_content.substring(0,100))),a.toString()}catch(t){return e}}},77699:(e,t,a)=>{a.d(t,{Q:()=>n});var r=a(95155),s=a(27506);function n(e){let{value:t,className:a=""}=e,n=(0,s.rU)(t),l=(e=>{let t=Math.max(0,Math.min(100,e));return t<=29?t/29*25:t<=64?25+(t-30)/34*25:t<=98?50+(t-65)/33*25:75+(t-99)/1*25})(t);return(0,r.jsxs)("div",{className:"relative flex items-center gap-0.5 ".concat(a),children:[s.AW.map((e,t)=>{let a=t===n,s=t<n;return(0,r.jsx)("div",{className:"h-2 flex-1 first:rounded-l last:rounded-r",style:{backgroundColor:a||s?e.color:"".concat(e.color,"30"),opacity:a?1:s?.7:.4,boxShadow:a?"0 0 6px ".concat(e.color,"60"):"none"},title:e.label},t)}),(0,r.jsx)("div",{className:"absolute top-1/2 h-3 w-0.5 bg-white rounded-full pointer-events-none",style:{left:"".concat(l,"%"),transform:"translate(-50%, -50%)",boxShadow:"0 0 4px rgba(255,255,255,0.8)"}})]})}},91444:(e,t,a)=>{a.d(t,{B0:()=>i,PH:()=>o,n3:()=>c});var r=a(95155),s=a(12115),n=a(53356);let l=(0,s.createContext)(null);function o(e){let{children:t,initialData:a}=e,s=(0,n.B)(a);return(0,r.jsx)(l.Provider,{value:s,children:t})}function i(){let e=(0,s.useContext)(l);if(!e)throw Error("useNEHIndex must be used within an NEHIndexProvider");return e}function c(){return(0,s.useContext)(l)}}}]);